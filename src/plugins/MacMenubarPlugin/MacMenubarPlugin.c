/* Automatically generated by
	SmartSyntaxPluginCodeGenerator VMMaker.oscog-eem.536 uuid: c021f329-3f3a-469b-a838-24e74c1be39c
   from
	MacMenubarPlugin VMMaker.oscog-eem.536 uuid: c021f329-3f3a-469b-a838-24e74c1be39c
 */
static char __buildInfo[] = "MacMenubarPlugin VMMaker.oscog-eem.536 uuid: c021f329-3f3a-469b-a838-24e74c1be39c " __DATE__ ;



#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

/* Default EXPORT macro that does nothing (see comment in sq.h): */
#define EXPORT(returnType) returnType

/* Do not include the entire sq.h file but just those parts needed. */
/*  The virtual machine proxy definition */
#include "sqVirtualMachine.h"
/* Configuration options */
#include "sqConfig.h"
/* Platform specific definitions */
#include "sqPlatformSpecific.h"

#define true 1
#define false 0
#define null 0  /* using 'null' because nil is predefined in Think C */
#ifdef SQUEAK_BUILTIN_PLUGIN
#undef EXPORT
// was #undef EXPORT(returnType) but screws NorCroft cc
#define EXPORT(returnType) static returnType
#endif

#include "MacMenubarPlugin.h"
#include "sqMemoryAccess.h"


/*** Constants ***/


/*** Function Prototypes ***/
static VirtualMachine * getInterpreter(void);
EXPORT(const char*) getModuleName(void);
static sqInt halt(void);
static sqInt msg(char *s);
EXPORT(sqInt) primitiveAppendMenu(void);
EXPORT(sqInt) primitiveAppendMenuItemText(void);
EXPORT(sqInt) primitiveCheckMenuItem(void);
EXPORT(sqInt) primitiveClearMenuBar(void);
EXPORT(sqInt) primitiveCountMenuItems(void);
EXPORT(sqInt) primitiveCreateStandardWindowMenu(void);
EXPORT(sqInt) primitiveDeleteMenu(void);
EXPORT(sqInt) primitiveDeleteMenuItem(void);
EXPORT(sqInt) primitiveDisableMenuCommand(void);
EXPORT(sqInt) primitiveDisableMenuItem(void);
EXPORT(sqInt) primitiveDisableMenuItemIcon(void);
EXPORT(sqInt) primitiveDisposeMenu(void);
EXPORT(sqInt) primitiveDisposeMenuBar(void);
EXPORT(sqInt) primitiveDrawMenuBar(void);
EXPORT(sqInt) primitiveEnableMenuCommand(void);
EXPORT(sqInt) primitiveEnableMenuItem(void);
EXPORT(sqInt) primitiveEnableMenuItemIcon(void);
EXPORT(sqInt) primitiveGetIndMenuItemWithCommandID(void);
EXPORT(sqInt) primitiveGetIndMenuWithCommandID(void);
EXPORT(sqInt) primitiveGetItemCmd(void);
EXPORT(sqInt) primitiveGetItemIcon(void);
EXPORT(sqInt) primitiveGetItemMark(void);
EXPORT(sqInt) primitiveGetItemStyle(void);
EXPORT(sqInt) primitiveGetMenuBar(void);
EXPORT(sqInt) primitiveGetMenuHandle(void);
EXPORT(sqInt) primitiveGetMenuID(void);
EXPORT(sqInt) primitiveGetMenuItemCommandID(void);
EXPORT(sqInt) primitiveGetMenuItemFontID(void);
EXPORT(sqInt) primitiveGetMenuItemHierarchicalID(void);
EXPORT(sqInt) primitiveGetMenuItemKeyGlyph(void);
EXPORT(sqInt) primitiveGetMenuItemModifiers(void);
EXPORT(sqInt) primitiveGetMenuItemText(void);
EXPORT(sqInt) primitiveGetMenuItemTextEncoding(void);
EXPORT(sqInt) primitiveGetMenuTitle(void);
EXPORT(sqInt) primitiveHideMenuBar(void);
EXPORT(sqInt) primitiveHiliteMenu(void);
EXPORT(sqInt) primitiveInsertFontResMenu(void);
EXPORT(sqInt) primitiveInsertIntlResMenu(void);
EXPORT(sqInt) primitiveInsertMenu(void);
EXPORT(sqInt) primitiveInsertMenuItem(void);
EXPORT(sqInt) primitiveInvalMenuBar(void);
EXPORT(sqInt) primitiveIsMenuBarVisible(void);
EXPORT(sqInt) primitiveIsMenuItemEnabled(void);
EXPORT(sqInt) primitiveIsMenuItemIconEnabled(void);
EXPORT(sqInt) primitiveNewMenu(void);
EXPORT(sqInt) primitiveSetItemCmd(void);
EXPORT(sqInt) primitiveSetItemIcon(void);
EXPORT(sqInt) primitiveSetItemMark(void);
EXPORT(sqInt) primitiveSetItemStyle(void);
EXPORT(sqInt) primitiveSetMenuBar(void);
EXPORT(sqInt) primitiveSetMenuItemCommandID(void);
EXPORT(sqInt) primitiveSetMenuItemFontID(void);
EXPORT(sqInt) primitiveSetMenuItemHierarchicalID(void);
EXPORT(sqInt) primitiveSetMenuItemKeyGlyph(void);
EXPORT(sqInt) primitiveSetMenuItemModifiers(void);
EXPORT(sqInt) primitiveSetMenuItemText(void);
EXPORT(sqInt) primitiveSetMenuItemTextEncoding(void);
EXPORT(sqInt) primitiveSetMenuTitle(void);
EXPORT(sqInt) primitiveShowMenuBar(void);
EXPORT(sqInt) setInterpreter(struct VirtualMachine*anInterpreter);
static sqInt sqAssert(sqInt aBool);


/*** Variables ***/

#if !defined(SQUEAK_BUILTIN_PLUGIN)
static sqInt (*booleanValueOf)(sqInt obj);
static sqInt (*classString)(void);
static sqInt (*failed)(void);
static sqInt (*falseObject)(void);
static void * (*firstIndexableField)(sqInt oop);
static sqInt (*instantiateClassindexableSize)(sqInt classPointer, sqInt size);
static sqInt (*integerObjectOf)(sqInt value);
static sqInt (*isBytes)(sqInt oop);
static sqInt (*popthenPush)(sqInt nItems, sqInt oop);
static sqInt (*positive32BitIntegerFor)(sqInt integerValue);
static sqInt (*positive32BitValueOf)(sqInt oop);
static sqInt (*stackIntegerValue)(sqInt offset);
static sqInt (*stackValue)(sqInt offset);
static sqInt (*success)(sqInt aBoolean);
static sqInt (*trueObject)(void);
#else /* !defined(SQUEAK_BUILTIN_PLUGIN) */
extern sqInt booleanValueOf(sqInt obj);
extern sqInt classString(void);
extern sqInt failed(void);
extern sqInt falseObject(void);
extern void * firstIndexableField(sqInt oop);
extern sqInt instantiateClassindexableSize(sqInt classPointer, sqInt size);
extern sqInt integerObjectOf(sqInt value);
extern sqInt isBytes(sqInt oop);
extern sqInt popthenPush(sqInt nItems, sqInt oop);
extern sqInt positive32BitIntegerFor(sqInt integerValue);
extern sqInt positive32BitValueOf(sqInt oop);
extern sqInt stackIntegerValue(sqInt offset);
extern sqInt stackValue(sqInt offset);
extern sqInt success(sqInt aBoolean);
extern sqInt trueObject(void);
extern
#endif
struct VirtualMachine* interpreterProxy;
static const char *moduleName =
#ifdef SQUEAK_BUILTIN_PLUGIN
	"MacMenubarPlugin VMMaker.oscog-eem.536 (i)"
#else
	"MacMenubarPlugin VMMaker.oscog-eem.536 (e)"
#endif
;



/*	Note: This is coded so that plugins can be run from Squeak. */

static VirtualMachine *
getInterpreter(void)
{
	return interpreterProxy;
}


/*	Note: This is hardcoded so it can be run from Squeak.
	The module name is used for validating a module *after*
	it is loaded to check if it does really contain the module
	we're thinking it contains. This is important! */

EXPORT(const char*)
getModuleName(void)
{
	return moduleName;
}

static sqInt
halt(void)
{
	;
	return 0;
}

static sqInt
msg(char *s)
{
	fprintf(stderr, "\n%s: %s", moduleName, s);
	return 0;
}

EXPORT(sqInt)
primitiveAppendMenu(void)
{
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	success(isBytes(stackValue(0)));
	str255 = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	AppendMenu(menuHandle,constStr255);
	return null;
}

EXPORT(sqInt)
primitiveAppendMenuItemText(void)
{
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	success(isBytes(stackValue(0)));
	str255 = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	AppendMenuItemText(menuHandle,constStr255);
	return null;
}

EXPORT(sqInt)
primitiveCheckMenuItem(void)
{
	sqInt aBoolean;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aBoolean = booleanValueOf(stackValue(0));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	CheckMenuItem(menuHandle,anInteger,aBoolean);
	return null;
}

EXPORT(sqInt)
primitiveClearMenuBar(void)
{
	ClearMenuBar();
	return null;
}

EXPORT(sqInt)
primitiveCountMenuItems(void)
{
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt returnValue;
	sqInt _return_value;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(2, _return_value);
		return null;
	}
	returnValue = CountMenuItems(menuHandle);
	_return_value = integerObjectOf(returnValue);
	if (failed()) {
		return null;
	}
	popthenPush(2, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveCreateStandardWindowMenu(void)
{
	sqInt inOptions;
	MenuHandle menuHandle;
	sqInt result;
	sqInt _return_value;

	inOptions = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	
#if TARGET_API_MAC_CARBON
;
	result = CreateStandardWindowMenu(inOptions,&menuHandle);
#endif;
	_return_value = positive32BitIntegerFor(((long) menuHandle));
	if (failed()) {
		return null;
	}
	popthenPush(2, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveDeleteMenu(void)
{
	sqInt menuID;

	menuID = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	DeleteMenu(menuID);
	return null;
}

EXPORT(sqInt)
primitiveDeleteMenuItem(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	DeleteMenuItem(menuHandle,anInteger);
	return null;
}

EXPORT(sqInt)
primitiveDisableMenuCommand(void)
{
	sqInt anInteger;
	MenuCommand commandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(anInteger)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	
#if TARGET_API_MAC_CARBON
DisableMenuCommand(menuHandle,commandID);
#endif;
	return null;
}

EXPORT(sqInt)
primitiveDisableMenuItem(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	DisableMenuItem(menuHandle,anInteger);
	return null;
}

EXPORT(sqInt)
primitiveDisableMenuItemIcon(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	DisableMenuItemIcon(menuHandle,anInteger);
	return null;
}

EXPORT(sqInt)
primitiveDisposeMenu(void)
{
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(2, _return_value);
		return null;
	}
	DisposeMenu(menuHandle);
	return null;
}

EXPORT(sqInt)
primitiveDisposeMenuBar(void)
{
	Handle menuBarHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuBarHandle = ((Handle) (positive32BitValueOf(menuHandleOop)));
	
#if TARGET_API_MAC_CARBON
	DisposeMenuBar(menuBarHandle);
	#else
	DisposeHandle(menuBarHandle);
	#endif
	;
	return null;
}

EXPORT(sqInt)
primitiveDrawMenuBar(void)
{
	DrawMenuBar();
	return null;
}

EXPORT(sqInt)
primitiveEnableMenuCommand(void)
{
	sqInt anInteger;
	MenuCommand commandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(anInteger)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	
#if TARGET_API_MAC_CARBON
EnableMenuCommand(menuHandle,commandID);
#endif;
	return null;
}

EXPORT(sqInt)
primitiveEnableMenuItem(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	EnableMenuItem(menuHandle,anInteger);
	return null;
}

EXPORT(sqInt)
primitiveEnableMenuItemIcon(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	EnableMenuItemIcon(menuHandle,anInteger);
	return null;
}

EXPORT(sqInt)
primitiveGetIndMenuItemWithCommandID(void)
{
	sqInt aCommandID;
	MenuHandle applicationMenu;
	MenuCommand commandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuItemIndex outIndex;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	aCommandID = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(aCommandID)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	
#if TARGET_API_MAC_CARBON
GetIndMenuItemWithCommandID(menuHandle, kHICommandHide, 1,
                   &applicationMenu, &outIndex);
#endif;
	_return_value = integerObjectOf(outIndex);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetIndMenuWithCommandID(void)
{
	sqInt aCommandID;
	MenuHandle applicationMenu;
	MenuCommand commandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuItemIndex outIndex;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	aCommandID = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(aCommandID)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	
#if TARGET_API_MAC_CARBON
GetIndMenuItemWithCommandID(menuHandle, kHICommandHide, 1,
                   &applicationMenu, &outIndex);
#endif ;
	_return_value = positive32BitIntegerFor(((long) applicationMenu));
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetItemCmd(void)
{
	CharParameter aCharacter;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	aCharacter = 0;
	GetItemCmd(menuHandle,anInteger,&aCharacter);
	_return_value = integerObjectOf(aCharacter);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetItemIcon(void)
{
	sqInt anInteger;
	short iconIndex;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	iconIndex = 0;
	GetItemIcon(menuHandle,anInteger,&iconIndex);
	_return_value = integerObjectOf(iconIndex);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetItemMark(void)
{
	CharParameter aCharacter;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	aCharacter = 0;
	GetItemMark(menuHandle,anInteger,&aCharacter);
	_return_value = integerObjectOf(aCharacter);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetItemStyle(void)
{
	sqInt anInteger;
	Style chStyle;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	chStyle = 0;
	GetItemStyle(menuHandle,anInteger,&chStyle);
	_return_value = integerObjectOf(chStyle);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuBar(void)
{
	Handle menuHandle;
	sqInt _return_value;

	menuHandle = GetMenuBar();
	_return_value = positive32BitIntegerFor(((long) menuHandle));
	if (failed()) {
		return null;
	}
	popthenPush(1, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuHandle(void)
{
	MenuHandle menuHandle;
	sqInt menuID;
	sqInt _return_value;

	menuID = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = GetMenuHandle(menuID);
	_return_value = positive32BitIntegerFor(((long) menuHandle));
	if (failed()) {
		return null;
	}
	popthenPush(2, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuID(void)
{
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuID menuID;
	sqInt _return_value;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(2, _return_value);
		return null;
	}
	menuID = GetMenuID(menuHandle);
	_return_value = integerObjectOf(menuID);
	if (failed()) {
		return null;
	}
	popthenPush(2, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuItemCommandID(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuCommand outCommandID;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	outCommandID = 0;
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	GetMenuItemCommandID(menuHandle,anInteger,&outCommandID);
	_return_value = positive32BitIntegerFor(outCommandID);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuItemFontID(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	SInt16 outFontID;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	outFontID = 0;
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	GetMenuItemFontID(menuHandle,anInteger,&outFontID);
	_return_value = integerObjectOf(outFontID);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuItemHierarchicalID(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuID outHierID;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	outHierID = 0;
	GetMenuItemHierarchicalID(menuHandle,anInteger,&outHierID);
	_return_value = integerObjectOf(outHierID);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuItemKeyGlyph(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	SInt16 outGlyph;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	outGlyph = 0;
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	GetMenuItemKeyGlyph(menuHandle,anInteger,&outGlyph);
	_return_value = positive32BitIntegerFor(outGlyph);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuItemModifiers(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	Style outModifers;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	outModifers = 0;
	GetMenuItemModifiers(menuHandle,anInteger,&outModifers);
	_return_value = integerObjectOf(outModifers);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuItemText(void)
{
	sqInt anInteger;
	Str255  aString;
	sqInt i;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt oop;
	char *ptr;
	sqInt size;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	aString[0] = 0;
	GetMenuItemText(menuHandle,anInteger,aString);
	size = aString[0];
	oop = instantiateClassindexableSize(classString(), size);
	ptr = firstIndexableField(oop);
	for (i = 0; i < size; i += 1) {
		ptr[i] = (aString[i + 1]);
	}
	if (failed()) {
		return null;
	}
	popthenPush(3, oop);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuItemTextEncoding(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	TextEncoding outScriptID;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	GetMenuItemTextEncoding(menuHandle,anInteger,&outScriptID);
	_return_value = positive32BitIntegerFor(outScriptID);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveGetMenuTitle(void)
{
	Str255  aString;
	sqInt i;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt oop;
	char *ptr;
	sqInt size;
	sqInt _return_value;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(2, _return_value);
		return null;
	}
	aString[0] = 0;
	GetMenuTitle(menuHandle,aString);
	size = aString[0];
	oop = instantiateClassindexableSize(classString(), size);
	ptr = firstIndexableField(oop);
	for (i = 0; i < size; i += 1) {
		ptr[i] = (aString[i + 1]);
	}
	if (failed()) {
		return null;
	}
	popthenPush(2, oop);
	return null;
}

EXPORT(sqInt)
primitiveHideMenuBar(void)
{
	HideMenuBar();
	return null;
}

EXPORT(sqInt)
primitiveHiliteMenu(void)
{
	sqInt menuID;

	menuID = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	HiliteMenu(menuID);
	return null;
}

EXPORT(sqInt)
primitiveInsertFontResMenu(void)
{
	sqInt afterItemInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt scriptFilterInteger;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	afterItemInteger = stackIntegerValue(1);
	scriptFilterInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	InsertFontResMenu(menuHandle,afterItemInteger,scriptFilterInteger);
	return null;
}

EXPORT(sqInt)
primitiveInsertIntlResMenu(void)
{
	sqInt afterItemInteger;
	sqInt aResType;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	ResType resType;
	sqInt scriptFilterInteger;
	sqInt _return_value;

	menuHandleOop = stackValue(3);
	aResType = stackIntegerValue(2);
	afterItemInteger = stackIntegerValue(1);
	scriptFilterInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(5, _return_value);
		return null;
	}
	resType = ((ResType) (positive32BitValueOf(aResType)));
	InsertIntlResMenu(menuHandle,resType,afterItemInteger,scriptFilterInteger);
	return null;
}

EXPORT(sqInt)
primitiveInsertMenu(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	InsertMenu(menuHandle,anInteger);
	return null;
}

EXPORT(sqInt)
primitiveInsertMenuItem(void)
{
	sqInt anInteger;
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	success(isBytes(stackValue(1)));
	str255 = ((char *) (firstIndexableField(stackValue(1))));
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	InsertMenuItem(menuHandle,constStr255,anInteger);
	return null;
}

EXPORT(sqInt)
primitiveInvalMenuBar(void)
{
	InvalMenuBar();
	return null;
}

EXPORT(sqInt)
primitiveIsMenuBarVisible(void)
{
	sqInt result;
	sqInt _return_value;

	result = IsMenuBarVisible();
	_return_value = ((result) ? trueObject() : falseObject());
	if (failed()) {
		return null;
	}
	popthenPush(1, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveIsMenuItemEnabled(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt result;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	result = IsMenuItemEnabled(menuHandle,anInteger);
	_return_value = ((result) ? trueObject() : falseObject());
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveIsMenuItemIconEnabled(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt result;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	result = IsMenuItemIconEnabled(menuHandle,anInteger);
	_return_value = ((result) ? trueObject() : falseObject());
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveNewMenu(void)
{
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuID;
	char *menuTitle;
	sqInt _return_value;

	menuID = stackIntegerValue(1);
	success(isBytes(stackValue(0)));
	menuTitle = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	constStr255 = ((ConstStr255Param) menuTitle);
	menuHandle = NewMenu(menuID,constStr255);
	_return_value = positive32BitIntegerFor(((long) menuHandle));
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

EXPORT(sqInt)
primitiveSetItemCmd(void)
{
	CharParameter  aCharacter;
	sqInt anInteger;
	sqInt anIntegerCmdChar;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	anIntegerCmdChar = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	aCharacter = anIntegerCmdChar;
	SetItemCmd(menuHandle,anInteger,aCharacter);
	return null;
}

EXPORT(sqInt)
primitiveSetItemIcon(void)
{
	sqInt aIconIndexInteger;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aIconIndexInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	SetItemIcon(menuHandle,anInteger,aIconIndexInteger);
	return null;
}

EXPORT(sqInt)
primitiveSetItemMark(void)
{
	CharParameter  aCharacter;
	sqInt aMarkChar;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aMarkChar = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	aCharacter = aMarkChar;
	SetItemMark(menuHandle,anInteger,aCharacter);
	return null;
}

EXPORT(sqInt)
primitiveSetItemStyle(void)
{
	sqInt anInteger;
	sqInt chStyleInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	chStyleInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	SetItemStyle(menuHandle,anInteger,chStyleInteger);
	return null;
}

EXPORT(sqInt)
primitiveSetMenuBar(void)
{
	MenuBarHandle menuBarHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuBarHandle = ((MenuBarHandle) (positive32BitValueOf(menuHandleOop)));
	SetMenuBar(menuBarHandle);
	return null;
}

EXPORT(sqInt)
primitiveSetMenuItemCommandID(void)
{
	sqInt anInteger;
	MenuCommand commandID;
	sqInt inCommandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	inCommandID = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(inCommandID)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	SetMenuItemCommandID(menuHandle,anInteger,commandID);
	return null;
}

EXPORT(sqInt)
primitiveSetMenuItemFontID(void)
{
	sqInt aFontIDInteger;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aFontIDInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	SetMenuItemFontID(menuHandle,anInteger,aFontIDInteger);
	return null;
}

EXPORT(sqInt)
primitiveSetMenuItemHierarchicalID(void)
{
	sqInt aMenuID;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aMenuID = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	SetMenuItemHierarchicalID(menuHandle,anInteger,aMenuID);
	return null;
}

EXPORT(sqInt)
primitiveSetMenuItemKeyGlyph(void)
{
	sqInt anInteger;
	sqInt inGlyphInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	inGlyphInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	SetMenuItemKeyGlyph(menuHandle,anInteger,inGlyphInteger);
	return null;
}

EXPORT(sqInt)
primitiveSetMenuItemModifiers(void)
{
	sqInt anInteger;
	sqInt aUInt8;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aUInt8 = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	SetMenuItemModifiers(menuHandle,anInteger,aUInt8);
	return null;
}

EXPORT(sqInt)
primitiveSetMenuItemText(void)
{
	sqInt anInteger;
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	success(isBytes(stackValue(0)));
	str255 = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	SetMenuItemText(menuHandle,anInteger,constStr255);
	return null;
}

EXPORT(sqInt)
primitiveSetMenuItemTextEncoding(void)
{
	sqInt anInteger;
	sqInt aTextEncodingOop;
	TextEncoding inScriptID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aTextEncodingOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(4, _return_value);
		return null;
	}
	inScriptID = ((TextEncoding) (positive32BitValueOf(aTextEncodingOop)));
	SetMenuItemTextEncoding(menuHandle,anInteger,inScriptID);
	return null;
}

EXPORT(sqInt)
primitiveSetMenuTitle(void)
{
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	success(isBytes(stackValue(0)));
	str255 = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positive32BitValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		_return_value = success(0);
		if (failed()) {
			return null;
		}
		popthenPush(3, _return_value);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	SetMenuTitle(menuHandle,constStr255);
	return null;
}

EXPORT(sqInt)
primitiveShowMenuBar(void)
{
	ShowMenuBar();
	return null;
}


/*	Note: This is coded so that it can be run in Squeak. */

EXPORT(sqInt)
setInterpreter(struct VirtualMachine*anInterpreter)
{
	sqInt ok;

	interpreterProxy = anInterpreter;
	ok = ((interpreterProxy->majorVersion()) == (VM_PROXY_MAJOR))
	 && ((interpreterProxy->minorVersion()) >= (VM_PROXY_MINOR));
	if (ok) {
		
#if !defined(SQUEAK_BUILTIN_PLUGIN)
		booleanValueOf = interpreterProxy->booleanValueOf;
		classString = interpreterProxy->classString;
		failed = interpreterProxy->failed;
		falseObject = interpreterProxy->falseObject;
		firstIndexableField = interpreterProxy->firstIndexableField;
		instantiateClassindexableSize = interpreterProxy->instantiateClassindexableSize;
		integerObjectOf = interpreterProxy->integerObjectOf;
		isBytes = interpreterProxy->isBytes;
		popthenPush = interpreterProxy->popthenPush;
		positive32BitIntegerFor = interpreterProxy->positive32BitIntegerFor;
		positive32BitValueOf = interpreterProxy->positive32BitValueOf;
		stackIntegerValue = interpreterProxy->stackIntegerValue;
		stackValue = interpreterProxy->stackValue;
		success = interpreterProxy->success;
		trueObject = interpreterProxy->trueObject;
#endif /* !defined(SQUEAK_BUILTIN_PLUGIN) */
	}
	return ok;
}

static sqInt
sqAssert(sqInt aBool)
{
	/* missing DebugCode */;
}


#ifdef SQUEAK_BUILTIN_PLUGIN

void* MacMenubarPlugin_exports[][3] = {
	{"MacMenubarPlugin", "getModuleName", (void*)getModuleName},
	{"MacMenubarPlugin", "primitiveAppendMenu", (void*)primitiveAppendMenu},
	{"MacMenubarPlugin", "primitiveAppendMenuItemText", (void*)primitiveAppendMenuItemText},
	{"MacMenubarPlugin", "primitiveCheckMenuItem", (void*)primitiveCheckMenuItem},
	{"MacMenubarPlugin", "primitiveClearMenuBar", (void*)primitiveClearMenuBar},
	{"MacMenubarPlugin", "primitiveCountMenuItems", (void*)primitiveCountMenuItems},
	{"MacMenubarPlugin", "primitiveCreateStandardWindowMenu", (void*)primitiveCreateStandardWindowMenu},
	{"MacMenubarPlugin", "primitiveDeleteMenu", (void*)primitiveDeleteMenu},
	{"MacMenubarPlugin", "primitiveDeleteMenuItem", (void*)primitiveDeleteMenuItem},
	{"MacMenubarPlugin", "primitiveDisableMenuCommand", (void*)primitiveDisableMenuCommand},
	{"MacMenubarPlugin", "primitiveDisableMenuItem", (void*)primitiveDisableMenuItem},
	{"MacMenubarPlugin", "primitiveDisableMenuItemIcon", (void*)primitiveDisableMenuItemIcon},
	{"MacMenubarPlugin", "primitiveDisposeMenu", (void*)primitiveDisposeMenu},
	{"MacMenubarPlugin", "primitiveDisposeMenuBar", (void*)primitiveDisposeMenuBar},
	{"MacMenubarPlugin", "primitiveDrawMenuBar", (void*)primitiveDrawMenuBar},
	{"MacMenubarPlugin", "primitiveEnableMenuCommand", (void*)primitiveEnableMenuCommand},
	{"MacMenubarPlugin", "primitiveEnableMenuItem", (void*)primitiveEnableMenuItem},
	{"MacMenubarPlugin", "primitiveEnableMenuItemIcon", (void*)primitiveEnableMenuItemIcon},
	{"MacMenubarPlugin", "primitiveGetIndMenuItemWithCommandID", (void*)primitiveGetIndMenuItemWithCommandID},
	{"MacMenubarPlugin", "primitiveGetIndMenuWithCommandID", (void*)primitiveGetIndMenuWithCommandID},
	{"MacMenubarPlugin", "primitiveGetItemCmd", (void*)primitiveGetItemCmd},
	{"MacMenubarPlugin", "primitiveGetItemIcon", (void*)primitiveGetItemIcon},
	{"MacMenubarPlugin", "primitiveGetItemMark", (void*)primitiveGetItemMark},
	{"MacMenubarPlugin", "primitiveGetItemStyle", (void*)primitiveGetItemStyle},
	{"MacMenubarPlugin", "primitiveGetMenuBar", (void*)primitiveGetMenuBar},
	{"MacMenubarPlugin", "primitiveGetMenuHandle", (void*)primitiveGetMenuHandle},
	{"MacMenubarPlugin", "primitiveGetMenuID", (void*)primitiveGetMenuID},
	{"MacMenubarPlugin", "primitiveGetMenuItemCommandID", (void*)primitiveGetMenuItemCommandID},
	{"MacMenubarPlugin", "primitiveGetMenuItemFontID", (void*)primitiveGetMenuItemFontID},
	{"MacMenubarPlugin", "primitiveGetMenuItemHierarchicalID", (void*)primitiveGetMenuItemHierarchicalID},
	{"MacMenubarPlugin", "primitiveGetMenuItemKeyGlyph", (void*)primitiveGetMenuItemKeyGlyph},
	{"MacMenubarPlugin", "primitiveGetMenuItemModifiers", (void*)primitiveGetMenuItemModifiers},
	{"MacMenubarPlugin", "primitiveGetMenuItemText", (void*)primitiveGetMenuItemText},
	{"MacMenubarPlugin", "primitiveGetMenuItemTextEncoding", (void*)primitiveGetMenuItemTextEncoding},
	{"MacMenubarPlugin", "primitiveGetMenuTitle", (void*)primitiveGetMenuTitle},
	{"MacMenubarPlugin", "primitiveHideMenuBar", (void*)primitiveHideMenuBar},
	{"MacMenubarPlugin", "primitiveHiliteMenu", (void*)primitiveHiliteMenu},
	{"MacMenubarPlugin", "primitiveInsertFontResMenu", (void*)primitiveInsertFontResMenu},
	{"MacMenubarPlugin", "primitiveInsertIntlResMenu", (void*)primitiveInsertIntlResMenu},
	{"MacMenubarPlugin", "primitiveInsertMenu", (void*)primitiveInsertMenu},
	{"MacMenubarPlugin", "primitiveInsertMenuItem", (void*)primitiveInsertMenuItem},
	{"MacMenubarPlugin", "primitiveInvalMenuBar", (void*)primitiveInvalMenuBar},
	{"MacMenubarPlugin", "primitiveIsMenuBarVisible", (void*)primitiveIsMenuBarVisible},
	{"MacMenubarPlugin", "primitiveIsMenuItemEnabled", (void*)primitiveIsMenuItemEnabled},
	{"MacMenubarPlugin", "primitiveIsMenuItemIconEnabled", (void*)primitiveIsMenuItemIconEnabled},
	{"MacMenubarPlugin", "primitiveNewMenu", (void*)primitiveNewMenu},
	{"MacMenubarPlugin", "primitiveSetItemCmd", (void*)primitiveSetItemCmd},
	{"MacMenubarPlugin", "primitiveSetItemIcon", (void*)primitiveSetItemIcon},
	{"MacMenubarPlugin", "primitiveSetItemMark", (void*)primitiveSetItemMark},
	{"MacMenubarPlugin", "primitiveSetItemStyle", (void*)primitiveSetItemStyle},
	{"MacMenubarPlugin", "primitiveSetMenuBar", (void*)primitiveSetMenuBar},
	{"MacMenubarPlugin", "primitiveSetMenuItemCommandID", (void*)primitiveSetMenuItemCommandID},
	{"MacMenubarPlugin", "primitiveSetMenuItemFontID", (void*)primitiveSetMenuItemFontID},
	{"MacMenubarPlugin", "primitiveSetMenuItemHierarchicalID", (void*)primitiveSetMenuItemHierarchicalID},
	{"MacMenubarPlugin", "primitiveSetMenuItemKeyGlyph", (void*)primitiveSetMenuItemKeyGlyph},
	{"MacMenubarPlugin", "primitiveSetMenuItemModifiers", (void*)primitiveSetMenuItemModifiers},
	{"MacMenubarPlugin", "primitiveSetMenuItemText", (void*)primitiveSetMenuItemText},
	{"MacMenubarPlugin", "primitiveSetMenuItemTextEncoding", (void*)primitiveSetMenuItemTextEncoding},
	{"MacMenubarPlugin", "primitiveSetMenuTitle", (void*)primitiveSetMenuTitle},
	{"MacMenubarPlugin", "primitiveShowMenuBar", (void*)primitiveShowMenuBar},
	{"MacMenubarPlugin", "setInterpreter", (void*)setInterpreter},
	{NULL, NULL, NULL}
};

#endif /* ifdef SQ_BUILTIN_PLUGIN */
